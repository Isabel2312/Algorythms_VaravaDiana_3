# Algorythms_VaravaDiana_3
## Назначение программы

Программа решает задачу нечеткого поиска дубликатов товарных предложений в каталоге маркетплейса.  
Для каждого нового товара из файла `new_items.txt` программа находит в каталоге `catalog.txt` все позиции, чьи названия достаточно похожи, и сохраняет результат в файл `duplicates.json`.

## Формат входных данных

**Файл `catalog.txt`** — существующий каталог товаров. Каждая строка описывает один товар и содержит:

- идентификатор товара (строка без пробелов);
- символ табуляции;
- полное название товара.

Пример:

```text
1001	Смартфон Xiaomi Redmi Note 12 Pro 8/256GB синий
1002	Телефон Huawei P60 Pro 12/512GB черный
```

Файл new_items.txt — список новых товаров в таком же формате:

```text
2001	Xiaomi Redmi Note 12 Pro 8/256 Синий
2002	Huawei P60 Pro 12/512 Black
```

Параметры алгоритма задаются константами в коде:

- SIMILARITY_THRESHOLD — порог схожести от 0 до 1 (например, 0.8 означает 80%).
- USE_PREPROCESSING — включает или отключает предобработку текста (приведение к нижнему регистру, удаление пунктуации, нормализация пробелов).

Краткое описание алгоритма
- Чтение файлов catalog.txt и new_items.txt в словари вида id -> название товара.
- При включённой предобработке названия очищаются: переводятся в нижний регистр, удаляются знаки пунктуации, лишние пробелы.
- Для каждой пары «новый товар — товар из каталога» вычисляется коэффициент схожести с помощью token_sort_ratio из библиотеки rapidfuzz.
- Если коэффициент не меньше SIMILARITY_THRESHOLD, товар считается потенциальным дубликатом и попадает в результат.
- Для каждого нового товара формируется список дубликатов, который сохраняется в duplicates.json.

Пример выходных данных:
```json
{
  "2001": [
    { "catalog_id": "1001", "similarity_score": 0.92 }
  ],
  "2002": [
    { "catalog_id": "1002", "similarity_score": 0.87 }
  ]
}
```
